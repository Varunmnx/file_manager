<!DOCTYPE html>
<html>

<head>
    <title>OnlyOffice Test</title>
    <script type="text/javascript" src="http://172.31.0.1:3600/web-apps/apps/api/documents/api.js"></script>
</head>

<body>
    <h1>OnlyOffice Simple Test</h1>
    <div id="placeholder" style="width: 100%; height: 600px;"></div>

    <script type="text/javascript">
        window.onload = function () {
            console.log('Testing OnlyOffice integration...');

            // Replace this with your actual file ID
            const fileId = '69787c46e6edbf6ef5813e81';
            const backendUrl = 'http://172.31.0.1:3000';

            const config = {
                "width": "100%",
                "height": "600px",
                "documentType": "word",
                "document": {
                    "fileType": "docx",
                    "key": fileId + "_" + Date.now(),
                    "title": "Test Document.docx",
                    "url": backendUrl + "/onlyoffice/download/" + fileId
                },
                "editorConfig": {
                    "mode": "edit",
                    "callbackUrl": backendUrl + "/onlyoffice/callback/" + fileId
                }
            };

            console.log('Config:', config);

            try {
                const docEditor = new DocsAPI.DocEditor("placeholder", config);
                console.log('Editor created:', docEditor);

                setTimeout(() => {
                    const iframe = document.querySelector('#placeholder iframe');
                    if (iframe) {
                        console.log('✅ SUCCESS: Iframe found!', iframe);
                    } else {
                        console.error('❌ FAILED: No iframe created');
                    }
                }, 3000);
            } catch (e) {
                console.error('Error creating editor:', e);
            }
        };
    </script>
</body>

</html>